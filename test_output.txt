Traceback (most recent call last):
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/test_graph_execution.py", line 26, in test_graph
    for event in graph.stream(state):
                 ~~~~~~~~~~~~^^^^^^^
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/langgraph/pregel/main.py", line 2633, in stream
    for _ in runner.tick(
             ~~~~~~~~~~~^
        [t for t in loop.tasks.values() if not t.writes],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        schedule_task=loop.accept_push,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ):
    ^
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/langgraph/pregel/_runner.py", line 167, in tick
    run_with_retry(
    ~~~~~~~~~~~~~~^
        t,
        ^^
    ...<10 lines>...
        },
        ^^
    )
    ^
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/langgraph/pregel/_retry.py", line 42, in run_with_retry
    return task.proc.invoke(task.input, config)
           ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/langgraph/_internal/_runnable.py", line 656, in invoke
    input = context.run(step.invoke, input, config, **kwargs)
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/langgraph/_internal/_runnable.py", line 400, in invoke
    ret = self.func(*args, **kwargs)
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/api/graph/agents/router_agent.py", line 78, in router_agent
    response = llm.invoke([system_message] + state["messages"])
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/api/services/gemini_client.py", line 97, in invoke
    response = self.client.models.generate_content(
        model=self.model,
    ...<4 lines>...
        )
    )
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/google/genai/models.py", line 5218, in generate_content
    response = self._generate_content(
        model=model, contents=contents, config=parsed_config
    )
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/google/genai/models.py", line 4000, in _generate_content
    response = self._api_client.request(
        'post', path, request_dict, http_options
    )
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/google/genai/_api_client.py", line 1330, in request
    response = self._request(http_request, http_options, stream=False)
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/google/genai/_api_client.py", line 1166, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ~~~~~~~~~~~~~~~~~^^
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/google/genai/_api_client.py", line 1143, in _request_once
    errors.APIError.raise_for_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/google/genai/errors.py", line 106, in raise_for_response
    cls.raise_error(response.status_code, response_json, response)
    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/mysterious/storage/github/CourseGPT-Pro-DSAI-Lab-Group-6/.venv/lib/python3.13/site-packages/google/genai/errors.py", line 131, in raise_error
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\nPlease retry in 52.743462678s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerDayPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-3-pro'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'model': 'gemini-3-pro', 'location': 'global'}}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '52s'}]}}
During task with name 'router_agent' and id '3d036def-7d46-7f44-1825-ee3ad6909a10'
Using Google API Key: AIzaS...

--- Sending Query: Calculate the 10th Fibonacci number. ---

Error running graph: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-3-pro\nPlease retry in 52.743462678s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerDayPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-3-pro'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'model': 'gemini-3-pro', 'location': 'global'}}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '52s'}]}}
